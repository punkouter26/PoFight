
> pofight@0.1.0 test:e2e
> playwright test


Running 9 tests using 9 workers

PAGE: Screen -> SELECT, mode= PvCPU
PAGE: Screen -> SELECT, mode= PvCPU
PAGE: Screen -> GAME
PAGE: Stage: Mount Effect
PAGE: Stage: Cleanup
PAGE: Stage: Mount Effect
PAGE: Screen -> SELECT, mode= PvCPU
PAGE: Screen -> GAME
PAGE: WebGPUCanvas mounted
PAGE: Stage: Mount Effect
PAGE: WebGPUCanvas mounted
PAGE: No available adapters.
PAGE: Stage: Cleanup
PAGE: WebGPU Init failed (falling back to legacy): Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: Stage: Mount Effect
PAGE: WebGPU Error, falling back to Legacy renderer: Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: No available adapters.
PAGE: WebGPU Init failed (falling back to legacy): Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: WebGPU Error, falling back to Legacy renderer: Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: WebGPUCanvas mounted
PAGE: WebGPUCanvas mounted
PAGE: No available adapters.
PAGE: WebGPU Init failed (falling back to legacy): Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: WebGPU Error, falling back to Legacy renderer: Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: No available adapters.
PAGE: WebGPU Init failed (falling back to legacy): Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: WebGPU Error, falling back to Legacy renderer: Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: Screen -> GAME
PAGE: Stage: Mount Effect
PAGE: Stage: Cleanup
PAGE: Stage: Mount Effect
PAGE: WebGPUCanvas mounted
PAGE: WebGPUCanvas mounted
PAGE: No available adapters.
PAGE: WebGPU Init failed (falling back to legacy): Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: WebGPU Error, falling back to Legacy renderer: Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: No available adapters.
PAGE: WebGPU Init failed (falling back to legacy): Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: WebGPU Error, falling back to Legacy renderer: Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: Screen -> SELECT, mode= PvCPU
PAGE: Screen -> SELECT, mode= PvCPU
PAGE: Screen -> SELECT, mode= PvCPU
PAGE: Screen -> SELECT, mode= PvCPU
  Î“Â£Ã´  5 [chromium] Î“Ã‡â•‘ e2e\visual.spec.ts:23:9 Î“Ã‡â•‘ Visual Regression Î“Ã‡â•‘ HUD should display both fighters (602ms)
PAGE: Screen -> GAME
PAGE: Screen -> GAME
PAGE: Stage: Mount Effect
PAGE: Stage: Cleanup
PAGE: Stage: Mount Effect
PAGE: Stage: Mount Effect
PAGE: Stage: Cleanup
PAGE: Stage: Mount Effect
PAGE: Screen -> GAME
PAGE: Screen -> GAME
PAGE: WebGPUCanvas mounted
PAGE: WebGPUCanvas mounted
PAGE: No available adapters.
PAGE: WebGPU Init failed (falling back to legacy): Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: WebGPU Error, falling back to Legacy renderer: Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: No available adapters.
PAGE: WebGPU Init failed (falling back to legacy): Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: Stage: Mount Effect
PAGE: WebGPU Error, falling back to Legacy renderer: Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: Stage: Mount Effect
PAGE: Stage: Cleanup
PAGE: Stage: Cleanup
PAGE: Stage: Mount Effect
PAGE: Stage: Mount Effect
PAGE: WebGPUCanvas mounted
PAGE: WebGPUCanvas mounted
PAGE: No available adapters.
PAGE: WebGPU Init failed (falling back to legacy): Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: WebGPU Error, falling back to Legacy renderer: Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: No available adapters.
PAGE: WebGPU Init failed (falling back to legacy): Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: WebGPU Error, falling back to Legacy renderer: Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: WebGPUCanvas mounted
PAGE: WebGPUCanvas mounted
PAGE: WebGPUCanvas mounted
PAGE: WebGPUCanvas mounted
PAGE: No available adapters.
PAGE: WebGPU Init failed (falling back to legacy): Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: WebGPU Error, falling back to Legacy renderer: Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: No available adapters.
PAGE: WebGPU Init failed (falling back to legacy): Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: WebGPU Error, falling back to Legacy renderer: Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: No available adapters.
PAGE: WebGPU Init failed (falling back to legacy): Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: WebGPU Error, falling back to Legacy renderer: Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: No available adapters.
PAGE: WebGPU Init failed (falling back to legacy): Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
PAGE: WebGPU Error, falling back to Legacy renderer: Error: No appropriate GPUAdapter found.
    at WebGPURenderer.initialize (http://localhost:3000/src/engine/renderer/WebGPURenderer.ts?t=1769447791502:64:13)
    at async init (http://localhost:3000/src/components/game/WebGPUCanvas.tsx?t=1769447791502:15:9)
  Î“Â£Ã´  6 [chromium] Î“Ã‡â•‘ e2e\visual.spec.ts:37:9 Î“Ã‡â•‘ Visual Regression Î“Ã‡â•‘ health bars should be full at start (580ms)
PAGE: Attack released! Type: PUNCH, Height: MID, Charge: 0.53s. Max? false
  Î“Â£Ã´  8 [chromium] Î“Ã‡â•‘ e2e\visual.spec.ts:52:9 Î“Ã‡â•‘ Visual Regression Î“Ã‡â•‘ charging visual feedback should appear (1.2s)
  Î“Â£Ã´  3 [chromium] Î“Ã‡â•‘ e2e\fight.spec.ts:26:9 Î“Ã‡â•‘ PoFight Core Î“Ã‡â•‘ should charge attack when holding R (2.9s)
  Î“Â£Ã´  1 [chromium] Î“Ã‡â•‘ e2e\fight.spec.ts:56:9 Î“Ã‡â•‘ PoFight Core Î“Ã‡â•‘ should overheat if held too long (3.2s)
PAGE: Attack released! Type: PUNCH, Height: MID, Charge: 0.68s. Max? false
PAGE: cpu HIT player for 5 damage! (PUNCH MID)
PAGE: Attack released! Type: PUNCH, Height: MID, Charge: 0.85s. Max? false
PAGE: cpu HIT player for 5 damage! (PUNCH MID)
PAGE: Attack released! Type: PUNCH, Height: MID, Charge: 1.18s. Max? true
PAGE: cpu HIT player for 5 damage! (PUNCH MID)
  Î“Â£Ã¿  9 [chromium] Î“Ã‡â•‘ e2e\visual.spec.ts:46:9 Î“Ã‡â•‘ Visual Regression Î“Ã‡â•‘ fighter sprites should be visible (canvas) (5.5s)
  Î“Â£Ã¿  2 [chromium] Î“Ã‡â•‘ e2e\fight.spec.ts:4:9 Î“Ã‡â•‘ PoFight Core Î“Ã‡â•‘ should load the game arena (5.6s)
  Î“Â£Ã¿  4 [chromium] Î“Ã‡â•‘ e2e\visual.spec.ts:13:9 Î“Ã‡â•‘ Visual Regression Î“Ã‡â•‘ game stage should render correctly (5.6s)
  Î“Â£Ã¿  7 [chromium] Î“Ã‡â•‘ e2e\visual.spec.ts:71:9 Î“Ã‡â•‘ Visual Regression Î“Ã‡â•‘ game should be responsive to viewport (5.7s)


  1) [chromium] Î“Ã‡â•‘ e2e\fight.spec.ts:4:9 Î“Ã‡â•‘ PoFight Core Î“Ã‡â•‘ should load the game arena Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('canvas')
    Expected: visible
    Timeout: 5000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for locator('canvas')[22m


      17 |
      18 |         // Wait for WebGPU canvas to be present
    > 19 |         await expect(page.locator('canvas')).toBeVisible();
         |                                              ^
      20 |
      21 |         // Check for Fighters by text in HUD
      22 |         await expect(page.locator('h2', { hasText: 'PLAYER' })).toBeVisible();
        at C:\Users\punko\Downloads\PoFight\e2e\fight.spec.ts:19:46

    Error Context: test-results\fight-PoFight-Core-should-load-the-game-arena-chromium\error-context.md

  2) [chromium] Î“Ã‡â•‘ e2e\visual.spec.ts:13:9 Î“Ã‡â•‘ Visual Regression Î“Ã‡â•‘ game stage should render correctly Î“Ã¶Ã‡

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('canvas')
    Expected: visible
    Timeout: 5000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for locator('canvas')[22m


      13 |     test('game stage should render correctly', async ({ page }) => {
      14 |         const stage = page.locator('canvas');
    > 15 |         await expect(stage).toBeVisible();
         |                             ^
      16 |
      17 |         // Check canvas dimensions (attribute or box)
      18 |         const box = await stage.boundingBox();
        at C:\Users\punko\Downloads\PoFight\e2e\visual.spec.ts:15:29

    Error Context: test-results\visual-Visual-Regression-game-stage-should-render-correctly-chromium\error-context.md

  3) [chromium] Î“Ã‡â•‘ e2e\visual.spec.ts:46:9 Î“Ã‡â•‘ Visual Regression Î“Ã‡â•‘ fighter sprites should be visible (canvas) 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('canvas')
    Expected: visible
    Timeout: 5000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for locator('canvas')[22m


      47 |         // WebGPU canvas should be present
      48 |         const canvas = page.locator('canvas');
    > 49 |         await expect(canvas).toBeVisible();
         |                              ^
      50 |     });
      51 |
      52 |     test('charging visual feedback should appear', async ({ page }) => {
        at C:\Users\punko\Downloads\PoFight\e2e\visual.spec.ts:49:30

    Error Context: test-results\visual-Visual-Regression-f-04d73-s-should-be-visible-canvas--chromium\error-context.md

  4) [chromium] Î“Ã‡â•‘ e2e\visual.spec.ts:71:9 Î“Ã‡â•‘ Visual Regression Î“Ã‡â•‘ game should be responsive to viewport 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('canvas')
    Expected: visible
    Timeout: 5000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for locator('canvas')[22m


      75 |
      76 |         const canvas = page.locator('canvas');
    > 77 |         await expect(canvas).toBeVisible();
         |                              ^
      78 |
      79 |         // Game should still render
      80 |         const box = await canvas.boundingBox();
        at C:\Users\punko\Downloads\PoFight\e2e\visual.spec.ts:77:30

    Error Context: test-results\visual-Visual-Regression-g-17c7f-d-be-responsive-to-viewport-chromium\error-context.md

  4 failed
    [chromium] Î“Ã‡â•‘ e2e\fight.spec.ts:4:9 Î“Ã‡â•‘ PoFight Core Î“Ã‡â•‘ should load the game arena Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡
    [chromium] Î“Ã‡â•‘ e2e\visual.spec.ts:13:9 Î“Ã‡â•‘ Visual Regression Î“Ã‡â•‘ game stage should render correctly Î“Ã¶Ã‡Î“Ã¶Ã‡
    [chromium] Î“Ã‡â•‘ e2e\visual.spec.ts:46:9 Î“Ã‡â•‘ Visual Regression Î“Ã‡â•‘ fighter sprites should be visible (canvas) 
    [chromium] Î“Ã‡â•‘ e2e\visual.spec.ts:71:9 Î“Ã‡â•‘ Visual Regression Î“Ã‡â•‘ game should be responsive to viewport 
  5 passed (7.5s)
